{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\iirov\\\\Documents\\\\GitHub\\\\frontpage\\\\client\\\\src\\\\components\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"../styles/Login.css\";\nimport { UserContext, UserProvider } from \"../contexts/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [username, setUsername] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [salasana, setSalasana] = useState(\"\");\n  const nav = useNavigate();\n  const {\n    user,\n    setUser\n  } = useContext(UserContext);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    await axios.post(\"http://localhost:5000/api/user/login\", {\n      email,\n      salasana\n    }).then(res => {\n      //  Backendissä tarkastetaan täsmäävätkö email ja salasana\n      //  Tämän jälkeen asetetaan useContextiin user_id, nimi, sekä loginState\n      if (res.data.message === \"Right password\") {\n        console.log(res.data);\n        console.log(\"Username: \", res.data.user.username);\n        setUser({\n          con_uid: res.data.user.uid,\n          con_nimi: res.data.user.username,\n          con_loginState: true\n        });\n        const d = new Date();\n        d.setTime(d.getTime());\n        var now = new Date();\n        now.setTime(now.getTime() + 1 * 3600 * 1000);\n        console.log(user.con_nimi);\n        document.cookie = `login_token=${res.data.user.username}; expires=${now}; path=/`;\n        console.log({\n          now\n        });\n\n        //  Lopuksi viedään käyttäjä etusivulle\n        nav(\"/\");\n      } else console.log(\"Kirjautuminen epäonnistui!\");\n    }).catch(err => console.log(\"Error: \", err));\n  };\n  const handleChange = () => {\n    return console.log(`Username:${username}, Email:${email}, Salasana:${salasana}`);\n  };\n  const {\n    logorreg,\n    setLogorreg\n  } = useContext(UserContext);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"login-form\",\n      onSubmit: handleSubmit,\n      onChange: handleChange,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"login-form-label\",\n        children: \"S\\xE4hk\\xF6posti : \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"login-form-input\",\n        type: \"text\",\n        onChange: e => {\n          setEmail(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"login-form-label\",\n        children: \"Salasana : \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"login-form-input\",\n        type: \"password\",\n        name: \"salasana\",\n        id: \"salasana\",\n        onChange: e => {\n          setSalasana(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Kirjaudu\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Eik\\xF6 sinulla ole viel\\xE4 tili\\xE4?\", \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setLogorreg(false);\n            console.log(`${logorreg}`);\n          },\n          children: \"Luo se nyt!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"BH5D+qvYBpi67DFOEAat3hfGC1E=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useContext","useState","Link","useNavigate","axios","UserContext","UserProvider","Login","username","setUsername","email","setEmail","salasana","setSalasana","nav","user","setUser","handleSubmit","e","preventDefault","post","then","res","data","message","console","log","con_uid","uid","con_nimi","con_loginState","d","Date","setTime","getTime","now","document","cookie","catch","err","handleChange","logorreg","setLogorreg","target","value"],"sources":["C:/Users/iirov/Documents/GitHub/frontpage/client/src/components/Login.jsx"],"sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nimport \"../styles/Login.css\";\r\n\r\nimport { UserContext, UserProvider } from \"../contexts/UserContext\";\r\n\r\nfunction Login() {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [salasana, setSalasana] = useState(\"\");\r\n\r\n  const nav = useNavigate();\r\n\r\n  const { user, setUser } = useContext(UserContext);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    await axios\r\n      .post(\"http://localhost:5000/api/user/login\", { email, salasana })\r\n      .then((res) => {\r\n        //  Backendissä tarkastetaan täsmäävätkö email ja salasana\r\n        //  Tämän jälkeen asetetaan useContextiin user_id, nimi, sekä loginState\r\n        if (res.data.message === \"Right password\") {\r\n\r\n            console.log(res.data);\r\n        \r\n            console.log(\"Username: \",res.data.user.username);\r\n          \r\n            setUser(\r\n                {\r\n                    con_uid: res.data.user.uid,\r\n                    con_nimi: res.data.user.username,\r\n                    con_loginState: true,\r\n                }\r\n            );\r\n\r\n            const d = new Date();\r\n            d.setTime(d.getTime());\r\n\r\n            var now = new Date();\r\n            now.setTime(now.getTime() + 1 * 3600 * 1000);\r\n\r\n            console.log(user.con_nimi);\r\n            document.cookie = `login_token=${res.data.user.username}; expires=${now}; path=/`;\r\n            console.log({now})\r\n          \r\n          //  Lopuksi viedään käyttäjä etusivulle\r\n          nav(\"/\");\r\n        } else console.log(\"Kirjautuminen epäonnistui!\");\r\n      })\r\n      .catch((err) => console.log(\"Error: \", err));\r\n  };\r\n\r\n  const handleChange = () => {\r\n    return console.log(\r\n      `Username:${username}, Email:${email}, Salasana:${salasana}`\r\n    );\r\n  };\r\n\r\n  const { logorreg, setLogorreg } = useContext(UserContext);\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <h1>Login</h1>\r\n      <form\r\n        className=\"login-form\"\r\n        onSubmit={handleSubmit}\r\n        onChange={handleChange}\r\n      >\r\n        <label className=\"login-form-label\">Sähköposti : </label>\r\n        <input\r\n          className=\"login-form-input\"\r\n          type=\"text\"\r\n          onChange={(e) => {\r\n            setEmail(e.target.value);\r\n          }}\r\n        />\r\n        <label className=\"login-form-label\">Salasana : </label>\r\n        <input\r\n          className=\"login-form-input\"\r\n          type=\"password\"\r\n          name=\"salasana\"\r\n          id=\"salasana\"\r\n          onChange={(e) => {\r\n            setSalasana(e.target.value);\r\n          }}\r\n        />\r\n        <button type=\"submit\">Kirjaudu</button>\r\n      </form>\r\n      <div>\r\n        <span>\r\n          Eikö sinulla ole vielä tiliä?{\" \"}\r\n          <button\r\n            onClick={() => {\r\n              setLogorreg(false);\r\n              console.log(`${logorreg}`);\r\n            }}\r\n          >\r\n            Luo se nyt!\r\n          </button>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}